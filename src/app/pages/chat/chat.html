<div class="chat-container">
  <div class="chat-list-container">
    <div class="user-details">
      <h2 class="header-text">UserName</h2>
      <button type="button" class="btn">
        <span class="icon-container">
          <lucide-angular [img]="sendMessage"></lucide-angular>
        </span>
      </button>
    </div>
    <form class="form">
      <span class="icon-container">
        <lucide-angular [img]="search"></lucide-angular>
      </span>
      <input type="text" name="" id="" class="form-control" placeholder="Search" />
    </form>
    <ul class="user-notes-list">
      <li class="note-item"></li>
      <li class="note-item"></li>
      <li class="note-item"></li>
    </ul>
    <h2 class="secondary-text messages-title-text">Messages</h2>
    <ul class="chat-list">
      @for(chat of chatList; track chat.id){
      <li class="chat-item">
        <a class="chat-link" [class]="chat.active ? 'active' : ''">
          <span class="img-container"> </span>
          <h2 class="name">{{ chat.name }}</h2>
          <p class="message">{{ chat.message }}</p>
        </a>
      </li>
      }
    </ul>
  </div>
  <div class="chat-content">
    <header class="chat-header">
      <div class="chat-user">
        <span class="img-container"></span>
        <h2 class="name">Julia Garcia</h2>
        <h4 class="user_name">juliaGarcia</h4>
      </div>
      <div class="chat-user-actions">
        <button type="button" class="">
          <span class="icon-container">
            <lucide-angular [img]="phone"></lucide-angular>
          </span>
        </button>
        <button type="button" class="">
          <span class="icon-container">
            <lucide-angular [img]="video"></lucide-angular>
          </span>
        </button>
        <button type="button" class="">
          <span class="icon-container">
            <lucide-angular [img]="info"></lucide-angular>
          </span>
        </button>
      </div>
    </header>
    <ul
      class="chat-messages-list"
      [class]="messageReply ? 'reply-message' : messageEdit ? 'edit-message' : ''"
      #messageList
    >
      @for(message of chatMessagesList(); track message.id){
      <app-chat-message-item
        [message]="message"
        (emojiAction)="handleEmojiAction($event)"
        (replyAction)="handleMessageReply($event)"
        (editAction)="handleMessageEdit($event)"
        (showUnsendDialog)="handleShowUnsendDialog($event)"
      />
      }
    </ul>
    <div class="chat-input">
      @if(messageReply){
      <div class="reply-message-details">
        <h2 class="replying-to">Replying to <span class="user-name">Julia Garcia</span></h2>
        <p class="reply-message">{{ messageReply.message }}</p>
        <button type="button" class="icon-container remove-reply" (click)="removeReplyMessage()">
          <lucide-angular [img]="close"></lucide-angular>
        </button>
      </div>
      } @if(messageEdit){
      <div class="reply-message-details">
        <h2 class="replying-to">Editing Message</h2>
        <button type="button" class="icon-container remove-reply" (click)="removeEditMessage()">
          <lucide-angular [img]="close"></lucide-angular>
        </button>
      </div>
      }
      <form [formGroup]="chatForm" class="form" (submit)="onChatSend()">
        @if(showEmojiListCard){
          <app-emoji-list-card class="emoji-list-card" appClickOutside (clickOutside)="handleShowEmojiListCard(false)" (listEmojiAction)="setEmojiToInput($event)" />
        }
        <button type="button" class="icon-container smile" (click)="handleShowEmojiListCard(true)">
          <lucide-angular [img]="emoji"></lucide-angular>
        </button>
        <input
          type="text"
          name=""
          id=""
          placeholder="Message"
          formControlName="message"
          #chatInput
        />
      </form>
    </div>
  </div>

  <dialog class="unsend-dialog" #unsendDialog>
    <div class="inner-container">
      <h2 class="unsend-title">Unsend Message?</h2>
      <p class="message">Are you sure you want to unsend this message?</p>
      <div class="actions">
        <button type="button" class="unsend" (click)="handleUnsendMessage()">Unsend</button>
        <button type="button" class="cancel" (click)="handleHideUnsendDialog()">Cancel</button>
      </div>
    </div>
  </dialog>
</div>
